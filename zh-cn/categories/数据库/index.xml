<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>æ•°æ®åº“ on Nansen Li</title>
        <link>https://nansenli.com/zh-cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/</link>
        <description>Recent content in æ•°æ®åº“ on Nansen Li</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>Nansen Li ğŸŒˆ ï¼ˆææ¥ æ£®ï¼‰</copyright>
        <lastBuildDate>Sun, 02 Sep 2018 14:25:00 +0000</lastBuildDate><atom:link href="https://nansenli.com/zh-cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Redis é›†ç¾¤å­¦ä¹ </title>
        <link>https://nansenli.com/zh-cn/post/jianshu/%E6%95%B0%E6%8D%AE%E5%BA%93/redis-%E9%9B%86%E7%BE%A4%E5%AD%A6%E4%B9%A0/</link>
        <pubDate>Sun, 02 Sep 2018 14:25:00 +0000</pubDate>
        
        <guid>https://nansenli.com/zh-cn/post/jianshu/%E6%95%B0%E6%8D%AE%E5%BA%93/redis-%E9%9B%86%E7%BE%A4%E5%AD%A6%E4%B9%A0/</guid>
        <description>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€
&lt;/h2&gt;&lt;p&gt;å›é¡¾ä¸€ä¸‹Redisé›†ç¾¤çš„ç›¸å…³çŸ¥è¯†ç‚¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é…ç½®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªRedisæ•°æ®åº“ç³»ç»Ÿæœ‰ä¸€ä¸ªä¸»æ•°æ®åº“ï¼Œå¤šä¸ªä»æ•°æ®åº“&lt;/li&gt;
&lt;li&gt;ä¸»æ•°æ®åº“ä¸éœ€è¦åšä»»ä½•é…ç½®ï¼Œä»æ•°æ®åº“åœ¨é…ç½®ä¸­åŠ å…¥&amp;ndash;slaveof ip portå³å¯&lt;/li&gt;
&lt;li&gt;ä»æ•°æ®åº“é»˜è®¤åªè¯»ï¼Œå°±ç®—æ”¹æˆå¯å†™ä¹Ÿæ²¡æœ‰å®é™…ç”¨å¤„&lt;/li&gt;
&lt;li&gt;é™¤äº†åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨slaveofå‘½ä»¤ï¼Œæ¥ä¿®æ”¹ä¸»æ•°æ®åº“&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒä¹…åŒ–å›é¡¾&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RDB è¯¥æ–¹å¼å°†Redisè¿›ç¨‹forkä¸€ä»½ï¼Œå­è¿›ç¨‹å°†å†…å­˜å†™å…¥æ–‡ä»¶ï¼Œç„¶åæ›¿æ¢ä¹‹å‰çš„RDBå¿«ç…§&lt;/li&gt;
&lt;li&gt;AOF  è¯¥æ–¹å¼Rediså°†æ¯æ¡å‘½ä»¤éƒ½å†™å…¥æ–‡ä»¶ä¸­ã€‚å½“AOFæ–‡ä»¶å¤ªå¤§çš„æ—¶å€™ï¼Œæ¯è¿½åŠ ä¸€å®šæ•°é‡çš„å‘½ä»¤æ—¶ï¼Œéœ€è¦é‡å†™ä¸€æ¬¡AOFæ–‡ä»¶ï¼Œå› ä¸ºå…¶ä¸­æœ‰äº›å‘½ä»¤æ—¶å†—ä½™çš„ã€‚å†™å…¥æ–‡ä»¶ç”±äºæ“ä½œç³»ç»Ÿæœ‰ç¼“å­˜ï¼Œå¯ä»¥è¿›è¡Œé…ç½®ã€‚ä¸é…ç½®çš„æƒ…å†µä¸‹30så†™å…¥ç£ç›˜ä¸€æ¬¡ã€‚å¯ä»¥é…ç½®ä¸ºæ¯æ¡å‘½ä»¤éƒ½åŒæ­¥ç¼“å­˜ï¼Œä¹Ÿå¯ä»¥é…ç½®ä¸ºæ¯ç§’åŒæ­¥ä¸€æ¬¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åŸç†&#34;&gt;åŸç†
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–å¤åˆ¶
&lt;ul&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;å½“ä»æ•°æ®åº“å¯åŠ¨åï¼Œå‘ä¸»æ•°æ®åº“å‘é€SYNCå‘½ä»¤&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;ä¸»æ•°æ®åº“è¿›è¡Œä¸€æ¬¡å¿«ç…§ä¿å­˜ï¼ŒåŒæ—¶åœ¨ä¿å­˜å¿«ç…§æ—¶å°†å‘½ä»¤ç¼“å­˜ä¸‹æ¥ï¼Œç„¶åå°†å¿«ç…§ä¸ä¿å­˜å¿«ç…§æœŸé—´çš„å‘½ä»¤ä¸€èµ·å‘é€ç»™ä»æ•°æ®åº“&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;å¦‚æœæ–­çº¿ä¹‹åï¼ŒRedis2.6ä»¥åŠä»¥å‰çš„ç‰ˆæœ¬ä¼šé‡æ–°è¿›è¡Œåˆå§‹åŒ–å¤åˆ¶ã€‚Redis2.8ä¹‹åçš„ç‰ˆæœ¬å¯ä»¥è¿‘ä¼ è¾“æ–­çº¿æœŸé—´çš„å‘½ä»¤ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;ä»æ•°æ®åº“å°†æ¥å—åˆ°çš„ä¸´æ—¶å¿«ç…§æ›¿æ¢ä¸ºé…ç½®ä¸­è®¾å®šçš„RDBå¿«ç…§æ–‡ä»¶ã€‚ä¹‹åçš„æ“ä½œå’ŒRDBæŒä¹…åŒ–æ¢å¤çš„è¿‡ç¨‹ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¤åˆ¶åŒæ­¥
&lt;ul&gt;
&lt;li&gt;ä¹‹åï¼Œä¸»æ•°æ®åº“ä¼šå°†å¯¼è‡´æ•°æ®åº“å˜åŒ–çš„å‘½ä»¤å‘é€ç»™ä»æ•°æ®åº“&lt;/li&gt;
&lt;li&gt;Rediså¤åˆ¶ç­–ç•¥ä½¿ç”¨çš„æ˜¯ä¹è§‚å¤åˆ¶ï¼Œå­˜åœ¨ä¸ä¸€è‡´æ—¶é—´çª—ã€‚ä¸»æ•°æ®åº“å¯ä»¥é…ç½®å½“æœ‰å¤šå°‘æ•°æ®åº“è¿æ¥æ—¶å¯å†™ï¼Œä»¥åŠå…è®¸æ•°æ®åº“æœ€é•¿å¤±å»é“¾æ¥æ—¶é—´ã€‚å¯ä»¥é™ä½ä¸€å®šç¨‹åº¦çš„æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è¯»å†™åˆ†ç¦»æé«˜æ€§èƒ½&#34;&gt;è¯»å†™åˆ†ç¦»æé«˜æ€§èƒ½
&lt;/h2&gt;&lt;p&gt;ä¸€äº›å¸¦æœ‰è€—æ—¶çš„è¯»æ“ä½œå¯ä»¥é€šè¿‡å¤åˆ¶åŠŸèƒ½å»ºç«‹å¤šä¸ªæ•°æ®åº“ä»èŠ‚ç‚¹æ¥åŠ å¿«é€Ÿåº¦&lt;/p&gt;
&lt;h2 id=&#34;slaveæ•°æ®åº“æŒä¹…åŒ–&#34;&gt;slaveæ•°æ®åº“æŒä¹…åŒ–
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨ä»æ•°æ®åº“æ—¶å¯ä»¥å…³é—­ä¸»æ•°æ®åº“çš„æŒä¹…åŒ–ã€‚ä½†æ˜¯ä¸»æ•°æ®åº“å´©æºƒçš„æ—¶å€™ï¼Œä¸»ä»æ•°æ®åº“éœ€è¦è¿›è¡Œèº«ä»½è½¬æ¢æ‰å¯ä»¥æ¢å¤ä¸»æ•°æ®åº“çš„å†…å®¹ã€‚ä»æ•°æ®åº“ä½¿ç”¨slaveof no oneï¼Œä¸»æ•°æ®åº“ä½¿ç”¨slaveofå‘½ä»¤è®¾ç½®ä¸ºä»æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä¸»æ•°æ®åº“å´©æºƒåï¼Œä¸èƒ½ç«‹åˆ»é‡æ–°å¯åŠ¨ã€‚å› ä¸ºå¦‚æœæ­¤æ—¶ä»æ–°å¯åŠ¨ï¼Œä¸»æ•°æ®åº“å› ä¸ºæ²¡æœ‰æŒä¹…åŒ–ï¼Œå°±ä¼šå°†ä»æ•°æ®åº“ä¸­çš„å†…å®¹æ¸…ç©ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ— ç¡¬ç›˜å¤åˆ¶&#34;&gt;æ— ç¡¬ç›˜å¤åˆ¶
&lt;/h2&gt;&lt;p&gt;ä¸»ä»å¤åˆ¶å¯ä»¥é€šè¿‡RDBæŒä¹…åŒ–æ–¹å¼æ¥å®ç°åˆå§‹åŒ–åŒæ­¥ã€‚
å½“ä¸»æ•°æ®åº“ç¦ç”¨RDBå¿«ç…§ï¼Œä½†æ˜¯å½“æ‰§è¡Œäº†åˆå§‹åŒ–å¤åˆ¶ï¼Œä»ç„¶ä¼šç”ŸæˆRDBå¿«ç…§ã€‚æ­¤æ—¶ä¸»æ•°æ®åº“é‡å¯åŠ¨æ—¶å°†ä¼šä½¿ç”¨RDBå¿«ç…§è¿›è¡Œæ¢å¤ã€‚å› ä¸ºåŒæ­¥æ—¶é—´ç‚¹ä¸ç¡®å®šï¼Œç”šè‡³å¯èƒ½å¾ˆä¹…éƒ½æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–åŒæ­¥ã€‚è¿™å¯èƒ½å¯¼è‡´æ¢å¤çš„æ—¶é—´ç‚¹å¯èƒ½æ˜¯ä»»æ„çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œåˆå§‹åŒ–åŒæ­¥æ—¶éœ€è¦åˆ›å»ºRDBå¿«ç…§ï¼Œå¦‚æœç£ç›˜é€Ÿåº¦å¤ªæ…¢å¯èƒ½ä¼šå½±å“åŒæ­¥çš„æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;ä»Redis2.8.18å¼€å§‹ï¼ŒRediså¼•å…¥äº†æ— ç¡¬ç›˜å¤åˆ¶ï¼Œå¼€å¯è¯¥é€‰é¡¹çš„æ—¶å€™ï¼Œåˆå§‹åŒ–å¤åˆ¶å°†ä¸å†åˆ›å»ºRDBå¿«ç…§ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç½‘ç»œå°†RDBå¿«ç…§å†…å®¹å‘é€èµ°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¢é‡å¤åˆ¶&#34;&gt;å¢é‡å¤åˆ¶
&lt;/h2&gt;&lt;p&gt;ä¸»æ•°æ®åº“å’Œä»æ•°æ®åº“å¦‚æœæ–­å¼€é“¾æ¥åï¼Œä¸‹ä¸€æ¬¡é‡æ–°é“¾æ¥å¦‚æœä½¿ç”¨åˆå§‹åŒ–å¤åˆ¶ï¼Œå¼€é”€ä¼šæ¯”è¾ƒé«˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“åœ¨æ¯æ¬¡è¿è¡Œæ—¶ï¼Œä¼šç”Ÿæˆå”¯ä¸€IDã€‚&lt;/li&gt;
&lt;li&gt;å¤åˆ¶åŒæ­¥é˜¶æ®µï¼Œä¸»æ•°æ®åº“ä¼šå°†æ¯ä¸€ä¸ªå‘½ä»¤æ”¾å…¥å›æ”¾æ—¥å¿—ä¸­ã€‚å¹¶è®°ä¸‹å½“å‰å‘½ä»¤çš„åç§»é‡ã€‚&lt;/li&gt;
&lt;li&gt;ä»æ•°æ®åº“æ¥å—å‘½ä»¤æ—¶ï¼Œä¹Ÿéœ€è¦è®°å½•ä¸‹å‘½ä»¤åç§»é‡ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä¸»ä»è¿æ¥å‡†å¤‡å°±ç»ªä¹‹åï¼Œä»æ•°æ®åº“å‘é€psyncæ¥å‘Šè¯‰ä¸»æ•°æ®åº“å¯ä»¥ä½¿ç”¨å¢é‡å¤åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;ä¸»æ•°æ®åº“åˆ¤æ–­ä»æ•°æ®åº“å‘é€çš„idå’Œè‡ªå·±æ˜¯å¦ç›¸åŒã€‚ä¸ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä¸»æ•°æ®åº“å¯èƒ½å·²ç»é‡å¯è¿‡äº†ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶ååˆ¤æ–­ä»æ•°æ®åº“çš„å‘½ä»¤åç§»é‡æ˜¯å¦å’Œåœ¨backlogå›æ”¾æ—¥å¿—ä¸­ï¼Œå¦‚æœåœ¨ï¼Œå°†å›æ”¾æ—¥å¿—ä¸­çš„å‘½ä»¤å‘ç»™ä»æ•°æ®åº“ã€‚&lt;/li&gt;
&lt;li&gt;backlogçš„å¤§å°å¯ä»¥é…ç½®ï¼Œé»˜è®¤æ—¶1MBã€‚è¶Šå¤§å¯ä»¥ä½¿æ–­çº¿é‡è¿åçš„å®¹å¿ç¨‹åº¦è¶Šé•¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å“¨å…µ&#34;&gt;å“¨å…µ
&lt;/h2&gt;&lt;p&gt;å“¨å…µç³»ç»Ÿçš„å‡ºç°ï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³ä¹‹å‰çš„ä¸»ä»æ•°æ®åº“çš„ç»´æŠ¤çš„ä¸æ–¹ä¾¿ã€‚ä»¥å‰å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œä¸»æ•°æ®åº“æŒ‚äº†æ— æ³•æ„ŸçŸ¥ã€‚ä¸»æ•°æ®åº“æŒ‚äº†ä¹‹åï¼Œä¸»ä»è½¬æ¢é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å“¨å…µè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šè¯»å–é…ç½®æ–‡ä»¶ã€‚é…ç½®æ–‡ä»¶ä¸­æœ‰master-name ip port ã€‚å½“ä¸»èŠ‚ç‚¹æ•…éšœæ—¶ï¼Œå“¨å…µå°†è‡ªåŠ¨è½¬æ¢å…¶ä¸­ä¸€ä¸ªä»èŠ‚ç‚¹ï¼Œå˜ä¸ºä¸»èŠ‚ç‚¹ã€‚å½“ä¹‹å‰çš„ä¸»èŠ‚ç‚¹æ¢å¤åï¼Œä¼šè‡ªåŠ¨è½¬å˜ä¸ºä»èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å“¨å…µå¯åŠ¨ä¹‹åï¼Œä¼šå®šæ—¶æ‰§è¡Œä¸‹é¢3ä¸ªæ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;10ç§’å‘masterã€slaveå‘é€INFO&lt;/li&gt;
&lt;li&gt;2ç§’å‘masterã€slaveçš„&lt;code&gt;__sentinel__:hello&lt;/code&gt;å‘é€è‡ªå·±çš„ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;1ç§’å‘ä¸»æ•°æ®åº“ã€ä»æ•°æ®åº“ã€å’Œå…¶ä»–å“¨å…µå‘é€PING&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;INFOä¿¡æ¯ä½¿å¾—å“¨å…µå¯ä»¥è·å–å½“å‰æ•°æ®åº“çš„ç›¸å…³ä¿¡æ¯ã€‚å‘masterå‘é€INFOå¯ä»¥è·å–å…¶ä»æ•°æ®åº“ã€‚
å‘é¢‘é“å‘é€è‡ªå·±çš„ä¿¡æ¯ï¼Œæ‰€æœ‰å“¨å…µå¯ä»¥æ”¶åˆ°ç›‘æ§åŒä¸€ä¸ªæ•°æ®åº“çš„å…¶ä»–å“¨å…µçš„ä¿¡æ¯ã€‚
å“¨å…µä¹‹é—´å»ºç«‹è¿æ¥ç›®çš„æ˜¯ä¸ºäº†å‘é€pingä¿¡æ¯ã€‚
å“¨å…µå‘é€pingå‘½ä»¤æ—¶æ²¡æœ‰è¿›è¡Œå›å¤ï¼Œå°±ä¼šè®¤ä¸ºå…¶ä¸»è§‚ä¸‹çº¿ã€‚å¦‚æœå‘ç°ä¸€ä¸ªä¸»æ•°æ®åº“ä¸»è§‚ä¸‹çº¿ï¼Œå°±ä¼šè¯¢é—®å…¶ä»–å“¨å…µæ˜¯å¦è®¤ä¸ºå…¶ä¸»è§‚ä¸‹çº¿ã€‚å¦‚æœè¾¾åˆ°ä¸€å®šæ•°é‡çš„æ—¶å€™ï¼Œè¶…è¿‡å“¨å…µå¯åŠ¨å‚æ•°ä¸­è®¾ç½®çš„quorumï¼Œå“¨å…µè®¤ä¸ºå…¶å®¢è§‚ä¸‹çº¿ã€‚&lt;/p&gt;
&lt;p&gt;RAFTé€‰ä¸¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘ç°ä¸»æ•°æ®åº“å®¢è§‚ä¸‹çº¿çš„å“¨å…µAå‘å…¶ä»–å“¨å…µå‘é€å‘½ä»¤ï¼Œè¯·æ±‚é€‰è‡ªå·±æˆä¸ºé¢†å¤´å“¨å…µã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¢«è¯·æ±‚çš„å“¨å…µè¿˜æ²¡æœ‰é€‰è¿‡å…¶ä»–äººï¼Œåˆ™ä¼šåŒæ„&lt;/li&gt;
&lt;li&gt;å¦‚æœAå‘ç°åŒæ„çš„æ•°é‡è¶…è¿‡äº†å“¨å…µæ•°é‡çš„ä¸€åŠå’Œquorumå‚æ•°ï¼Œåˆ™Aæˆä¸ºé¢†å¤´å“¨å…µã€‚&lt;/li&gt;
&lt;li&gt;å¦åˆ™ï¼Œéšæœºç­‰å¾…ä¸€ä¸ªæ—¶é—´é‡æ–°å‘èµ·è¯·æ±‚ï¼Œè¿›è¡Œä¸‹ä¸€è½®é€‰ä¸¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¢†å¤´å“¨å…µä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹ä»æ•°æ®åº“çš„ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§è¶Šé«˜çš„é€‰ä»–&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹ä»æ•°æ®åº“çš„å¤åˆ¶å‘½ä»¤åç§»é‡ï¼Œåç§»é‡è¶Šå¤§çš„é€‰ä»–&lt;/li&gt;
&lt;li&gt;é€‰æ‹©IDå°çš„ä»æ•°æ®åº“&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¢«é€‰ä¸­çš„æ•°æ®åº“ä¼šè¢«é¢†å¤´å“¨å…µå‘é€slaveof no oneæˆä¸ºä¸»æ•°æ®åº“ï¼Œå…¶ä»–ä»æ•°æ®åº“ä¼šæ”¶åˆ°slaveofå‘½ä»¤æ›´æ”¹å…¶ä¸»æ•°æ®åº“ã€‚æœ€åï¼Œæ›´æ”¹å†…éƒ¨è®°å½•ï¼Œå°†å·²ç»åœæ­¢çš„æ•°æ®åº“æ›´æ–°ä¸ºä¸»æ•°æ®åº“çš„ä»æ•°æ®åº“ï¼Œä½¿å½“å…¶æ¢å¤æœåŠ¡æ—¶ä»¥ä»æ•°æ®åº“çš„èº«ä»½æ¢å¤ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²&#34;&gt;éƒ¨ç½²
&lt;/h2&gt;&lt;p&gt;å“¨å…µä¸€èˆ¬éƒ¨ç½²åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå¦‚æœredisé›†ç¾¤å¾ˆå¤§ï¼Œæ‰€æœ‰å“¨å…µä¸ä¸€ä¸ªä»æ•°æ®åº“ä¹‹é—´çš„è¿æ¥æ•°é‡å¤ªå¤šä¼šå½±å“rediså¯¹æ‰€æœ‰å“¨å…µçš„å›å¤ã€‚æ‰€ä»¥éƒ¨ç½²çš„æ•°é‡ä¸èƒ½å¤ªå¤šã€‚&lt;/p&gt;
&lt;h2 id=&#34;é›†ç¾¤&#34;&gt;é›†ç¾¤
&lt;/h2&gt;&lt;p&gt;æ°´å¹³æ‰©å®¹è¿™å—ï¼Œåœ¨è…¾è®¯å®ä¹ æœŸé—´è§£é™¤äº†codisã€‚codisåˆ†ä¸ºredis proxyå’Œä»èŠ‚ç‚¹ã€‚ä¸»è¦åŸç†å°±æ˜¯å¯¹keyè¿›è¡Œhashä¹‹åï¼Œæ”¾å…¥åˆ°å…·ä½“çš„redis slaveä¸­ã€‚è„šæœ¬åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œè¢«åˆ†é…åˆ°å…·ä½“çš„slaveä¸­æ‰§è¡Œï¼Œå¯èƒ½ä¼šé‡åˆ°æ‰¾ä¸åˆ°å…¶ä»–keyçš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†codisï¼Œè¿˜æœ‰redis clusterã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¯åŠ¨rediså®ä¾‹æ—¶ï¼Œé…ç½®ä¸­cluster-enablesæ”¹ä¸ºyesï¼Œå³å¯æ‰“å¼€é›†ç¾¤é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨è„šæœ¬å¯ä»¥æ–¹ä¾¿çš„åˆ›å»ºé›†ç¾¤ã€‚å¢åŠ æ–°èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨cluster meetå‘½ä»¤æ·»åŠ ipå’Œç«¯å£ã€‚è¯¥èŠ‚ç‚¹æ·»åŠ æ–°èŠ‚ç‚¹åï¼Œä¼šä½¿ç”¨gossipåè®®å°†è¯¥èŠ‚ç‚¹çš„ä¿¡æ¯å¹¿æ’­åˆ°æ‰€æœ‰èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;æ’æ§½çš„åˆ†é…ã€‚æ–°çš„èŠ‚ç‚¹åŠ å…¥é›†ç¾¤åæœ‰ä¸¤ç§é€‰æ‹©ï¼Œè¦ä¹ˆä½¿ç”¨cluster replicateå‘½ä»¤å¤åˆ¶æ¯ä¸ªä¸»æ•°æ®åº“æ¥ä»¥ä»æ•°æ®åº“çš„å½¢å¼è¿è¡Œï¼Œè¦ä¹ˆå‘é›†ç¾¤ç”³è¯·åˆ†é…æ’æ§½slotæ¥ä»¥ä¸»æ•°æ®åº“çš„å½¢å¼è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;keyä½¿ç”¨crc16åšhashè¿ç®—ï¼Œå¦‚æœå­˜åœ¨{*}ï¼Œåˆ™ä½¿ç”¨è¯¥éƒ¨åˆ†åšhashè¿ç®—ï¼Œç„¶ååˆ†ç»™16384ä¸ªæ§½ä¸­çš„ä¸€ä¸ªã€‚é›†ç¾¤åœ¨åˆ›å»ºçš„å¼€å§‹æ—¶å°±æœ‰ä¸€ä¸ªæ§½åˆ†é…çš„æ˜ å°„è¡¨ã€‚æœ€ç»ˆæ•°æ®ä¼šå­˜åœ¨å¯¹åº”çš„redisèŠ‚ç‚¹ä¸­ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>MySQLå­¦ä¹ ç¬”è®°</title>
        <link>https://nansenli.com/zh-cn/post/jianshu/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Mon, 05 Mar 2018 07:04:00 +0000</pubDate>
        
        <guid>https://nansenli.com/zh-cn/post/jianshu/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€
&lt;/h2&gt;&lt;p&gt;è¿™é‡Œä½¿ç”¨dockerè¿›è¡Œå­¦ä¹ ã€‚é…ç½®äº†docker-cnçš„é•œåƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;mysqlé›†ç¾¤å»ºç«‹&#34;&gt;Mysqlé›†ç¾¤å»ºç«‹
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ‹‰å–mysqlé•œåƒ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker pull mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å»ºç«‹ä¸€ä¸ªmasterå’Œä¸€ä¸ªslave&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;docker run --name mysql-master -P -d -e MYSQL_ROOT_PASSWORD=ln mysql
docker run --name mysql-slave1 -P -d -e MYSQL_ROOT_PASSWORD=ln mysql
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­-dæ˜¯é…ç½®æˆä¸ºå®ˆæŠ¤è¿›ç¨‹ã€‚-Pæš´éœ²æ‰€æœ‰ç«¯å£ã€‚è®¾ç½®rootå¯†ç ä¸ºlnã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸‹é¢å‘½ä»¤åˆ†åˆ«è¿›å…¥ä¸¤ä¸ªdockerä¸­&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker exec -it mysql-master bash
docker exec -it mysql-slave1 bash
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æŸ¥çœ‹ç½‘å¡ipã€‚è¿™é‡Œé¦–å…ˆè¦å®‰è£…net-toolsï¼Œå®‰è£…å‰è¦updateï¼Œupdateå‰è¦æ¢æº&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sed -i &amp;#39;s/deb.debian.org/mirrors.ustc.edu.cn/g&amp;#39; /etc/apt/sources.list
apt updaet
apt install net-tools
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å…¥ifconfigæŸ¥çœ‹ipã€‚
å…¶ä¸­masteræ˜¯172.17.0.2ï¼Œslave1æ˜¯172.17.0.3&lt;/p&gt;
&lt;p&gt;è®¾ç½®ç™»å½•æƒé™
åœ¨masterä¸­çš„mysqlä¸­æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤æ“ä½œï¼Œé¦–å…ˆç™»å½•ï¼Œç„¶åè®¾ç½®åç§°ä¸ºrootç”¨æˆ·éƒ½å¯ä»¥æ— å¯†ç è®¿é—®ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;mysql -uroot -p
mysql&amp;gt; grant all privileges on *.* to root@&amp;#39;%&amp;#39; identified by &amp;#39;&amp;#39;;
Query OK, 0 rows affected (0.02 sec)

mysql&amp;gt;  flush privileges;
Query OK, 0 rows affected (0.02 sec)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨slave1ä¸­ä½¿ç”¨masterçš„æ•°æ®åº“ï¼Œå¯†ç ä¸ºç©º&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysql -uroot -p -h 172.17.0.2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨masterä¸­åˆ›å»ºä¸€ä¸ªdatabase&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;create database test_docker;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨slave1ä¸­æŸ¥çœ‹è¯¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;show databases;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;çäº‹&#34;&gt;çäº‹
&lt;/h2&gt;&lt;p&gt;sqlå¯¹å¤§å°å†™ä¸æ•æ„Ÿï¼ŒSELECTä¸selectæ˜¯ä¸€æ ·çš„ã€‚
sqlè¯­å¥åé¢æœ€å¥½åŠ ä¸Šåˆ†å·ã€‚
useç”¨äºé€‰æ‹©æ•°æ®åº“ã€‚setç”¨äºè®¾ç½®å€¼ã€‚
æ·»åŠ ç”¨æˆ·çš„æ–¹å¼ä½¿ç”¨createæ¥æ·»åŠ ã€‚
ç„¶åæˆæƒç”¨æˆ·ä½¿ç”¨æ•°æ®åº“ä¸è¡¨ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;mysql -u root -p
Enter password:**
mysql&amp;gt; use mysql;
mysql&amp;gt; create user &amp;#39;linanwx&amp;#39;@&amp;#39;%&amp;#39; identified by &amp;#39;ln&amp;#39;;
mysql&amp;gt; grant all on *.* to &amp;#39;linanwx&amp;#39;@&amp;#39;%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;SHOW DATABASESç”¨äºå±•ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚
SHOW TABLESåˆ™ç”¨äºå±•ç¤ºå½“å‰çš„è¡¨ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ç‰›å®¢æ•°æ®åº“ç¬”è®°</title>
        <link>https://nansenli.com/zh-cn/post/jianshu/%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%89%9B%E5%AE%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Mon, 05 Mar 2018 07:04:00 +0000</pubDate>
        
        <guid>https://nansenli.com/zh-cn/post/jianshu/%E6%95%B0%E6%8D%AE%E5%BA%93/%E7%89%9B%E5%AE%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€
&lt;/h2&gt;&lt;p&gt;å¯¹SQLä¸ç†Ÿæ‚‰ï¼Œä½†æ˜¯åˆä¸æƒ³èŠ±æ—¶é—´å­¦ä¹ ã€‚é‚£å°±ä»¥é¢˜ä»£å­¦å§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;äº‹åŠ¡&#34;&gt;äº‹åŠ¡
&lt;/h2&gt;&lt;p&gt;äº‹åŠ¡(Transaction)æ˜¯å¹¶å‘æ§åˆ¶çš„åŸºæœ¬å•ä½ã€‚æ‰€è°“äº‹åŠ¡,å®ƒæ˜¯ä¸€ä¸ªæ“ä½œåºåˆ—ï¼Œè¿™äº›æ“ä½œè¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ã€‚ä¾‹å¦‚ï¼Œé“¶è¡Œè½¬å¸å·¥ä½œï¼šä»ä¸€ä¸ªå¸å·æ‰£æ¬¾å¹¶ä½¿å¦ä¸€ä¸ªå¸å·å¢æ¬¾ï¼Œè¿™ä¸¤ä¸ªæ“ä½œè¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚æ‰€ä»¥ï¼Œåº”è¯¥æŠŠä»–ä»¬çœ‹æˆä¸€ä¸ªäº‹åŠ¡ã€‚äº‹åŠ¡æ˜¯æ•°æ®åº“ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§çš„å•ä½ï¼Œåœ¨æ¯ä¸ªäº‹åŠ¡ç»“æŸæ—¶ï¼Œéƒ½èƒ½ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;p&gt;è¯´ç™½äº†äº‹åŠ¡å°±æ˜¯åŸå­æ“ä½œï¼Œä¸å¯åˆ†å‰²ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§†å›¾&#34;&gt;è§†å›¾
&lt;/h2&gt;&lt;p&gt;è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è¡¨ï¼Œå®é™…ä¸Šä¸å­˜åœ¨ã€‚åªæ˜¯ä¸ºäº†æ–¹ä¾¿ç»™æŸäº›äººçœ‹çš„æ—¶å€™ï¼Œä»æ•°æ®åº“ä¸­æ‘˜å‡ºæ¥çš„éƒ¨åˆ†è¡¨ã€‚è§†å›¾ç”±selectæŸ¥è¯¢æ‰€å®šä¹‰â€”â€” å½“åˆ›å»ºä¸€ä¸ªè§†å›¾æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ•°æ®åº“é‡Œæ‰§è¡Œäº†ä¸€ä¸ªselectè¯­å¥&lt;/p&gt;
&lt;h2 id=&#34;instead-of-è§¦å‘å™¨&#34;&gt;instead of è§¦å‘å™¨
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è§¦å‘å™¨å®šä¹‰
è§¦å‘å™¨å®é™…ä¸Šæ˜¯ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨çš„è¿‡ç¨‹ã€‚è§¦å‘å™¨çš„ä¸»è¦åŠŸèƒ½æ˜¯ç›‘è§†ç”¨æˆ·å¯¹æ•°æ®çš„ä¿®æ”¹ã€‚å¦‚æœé’ˆå¯¹ä¸€ä¸ªæ•°æ®è¡¨å»ºäº†è§¦å‘å™¨ï¼Œåˆ™ å½“æ•°æ®è¡¨è¢«ä¿®æ”¹ï¼ˆæ’å…¥ã€æ›´æ–°æˆ–è€…åˆ é™¤ï¼‰æ—¶ï¼ŒSQL Serverä¾¿ä½¿è§¦å‘å™¨è‡ªåŠ¨æ‰§è¡Œï¼Œä»¥ä¾¿å¯¹æ•°æ®çš„ä¿®æ”¹é‡‡ç”¨ä¸€äº›é€‚å½“çš„æªæ–½ï¼Œä»è€Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;INSTEAD OFè§¦å‘å™¨æŒ‡å®šæ‰§è¡Œè§¦å‘å™¨è€Œä¸æ˜¯æ‰§è¡Œè§¦å‘ çš„SQL è¯­å¥ï¼Œä»è€Œæ›¿ä»£è§¦å‘è¯­å¥çš„æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;å­˜å‚¨è¿‡ç¨‹&#34;&gt;å­˜å‚¨è¿‡ç¨‹
&lt;/h2&gt;&lt;p&gt;å­˜å‚¨è¿‡ç¨‹æ˜¯æ•°æ®åº“ä¸­ï¼Œä¸€ç»„ä¸ºäº†å®Œæˆç‰¹å®šåŠŸèƒ½çš„SQL è¯­å¥é›†ï¼Œå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç»è¿‡ç¬¬ä¸€æ¬¡ç¼–è¯‘åå†æ¬¡è°ƒç”¨ä¸éœ€è¦å†æ¬¡ç¼–è¯‘ï¼Œç”¨æˆ·é€šè¿‡æŒ‡å®šå­˜å‚¨è¿‡ç¨‹çš„åå­—å¹¶ç»™å‡ºå‚æ•°ï¼ˆå¦‚æœè¯¥å­˜å‚¨è¿‡ç¨‹å¸¦æœ‰å‚æ•°ï¼‰æ¥æ‰§è¡Œå®ƒã€‚å­˜å‚¨è¿‡ç¨‹æ˜¯æ•°æ®åº“ä¸­çš„ä¸€ä¸ªé‡è¦å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;sql-å…³ç³»ä»£æ•°&#34;&gt;sql å…³ç³»ä»£æ•°
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;äº”ä¸ªåŸºæœ¬æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Â Â Â  å¹¶(âˆª)ã€å·®(-)ã€ç¬›å¡å°”ç§¯(Ã—)ã€æŠ•å½±(Ïƒ)ã€é€‰æ‹©(Ï€)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å››ä¸ªç»„åˆæ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;äº¤(âˆ©)ã€è”æ¥(ç­‰å€¼è”æ¥)ã€è‡ªç„¶è”æ¥ã€é™¤æ³•(Ã·)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¹¶æ˜¯åœ¨ä¸¤ä¸ªè¡¨ä¸­éƒ½æœ‰çš„è®°å½•ã€‚å·®æ˜¯åœ¨ç¬¬ä¸€ä¸ªè¡¨ä¸­æœ‰åœ¨ç¬¬äºŒä¸ªè¡¨ä¸­æ²¡æœ‰ã€‚ç¬›å¡å°”ç§¯æ˜¯ä¸¤ä¸ªè¡¨è®°å½•ä¸€å¯¹ä¸€çš„æ‰€æœ‰ç»„åˆã€‚æŠ•å½±æ˜¯çºµå‘é€‰æ‹©ï¼Œé€‰æ‹©æ˜¯æ¨ªå‘é€‰æ‹©ã€‚äº¤å’Œå¹¶ç±»å‹ï¼Œè¿æ¥æ˜¯é€šè¿‡å…±åŒå±æ€§è”æ¥ã€‚é™¤æ³•æ˜¯ä¸€ç§å¤æ‚çš„è¿ç®—ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³ç³»æ¨¡å¼&#34;&gt;å…³ç³»æ¨¡å¼
&lt;/h2&gt;&lt;p&gt;å…³ç³»æ¨¡å¼æ˜¯æŒ‡å…³ç³»çš„æè¿°ï¼Œç°å®ä¸–ç•Œéšç€æ—¶é—´åœ¨ä¸æ–­åœ°å˜åŒ–ï¼Œå› è€Œåœ¨ä¸åŒçš„æ—¶åˆ»ï¼Œå…³ç³»æ¨¡å¼çš„å…³ç³»ä¹Ÿä¼šæœ‰æ‰€å˜åŒ–ã€‚ä½†æ˜¯ï¼Œç°å®ä¸–ç•Œçš„è®¸å¤šå·±æœ‰äº‹å®é™å®šäº†å…³ç³»æ¨¡å¼æ‰€æœ‰å¯èƒ½çš„å…³ç³»å¿…é¡»æ»¡è¶³ä¸€å®šçš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶ã€‚è¿™äº›çº¦æŸæˆ–è€…é€šè¿‡å¯¹å±æ€§&lt;a class=&#34;link&#34; href=&#34;https://baike.baidu.com/item/%E5%8F%96%E5%80%BC%E8%8C%83%E5%9B%B4&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å–å€¼èŒƒå›´&lt;/a&gt;çš„é™å®šï¼Œä¾‹å¦‚èŒå·¥å¹´é¾„å°äº65å²ï¼ˆ65å²ä»¥åå¿…é¡»é€€ä¼‘ï¼‰ï¼Œæˆ–è€…é€šè¿‡&lt;a class=&#34;link&#34; href=&#34;https://baike.baidu.com/item/%E5%B1%9E%E6%80%A7%E5%80%BC&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å±æ€§å€¼&lt;/a&gt;é—´çš„ç›¸äº’å…³è¿ï¼ˆä¸»è¦ä½“ç°äºå€¼çš„ç›¸ç­‰ä¸å¦ï¼‰åæ˜ å‡ºæ¥ã€‚å…³ç³»æ¨¡å¼åº”å½“åˆ»ç”»å‡ºè¿™äº›å®Œæ•´æ€§çº¦æŸæ¡ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éå…³ç³»æ•°æ®åº“&#34;&gt;éå…³ç³»æ•°æ®åº“
&lt;/h2&gt;&lt;p&gt;NoSQL(NoSQL = Not Only SQL )ï¼Œæ„å³&amp;quot;ä¸ä»…ä»…æ˜¯SQL&amp;quot;ã€‚ç”¨äºè¶…å¤§è§„æ¨¡æ•°æ®çš„å­˜å‚¨ã€‚&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
